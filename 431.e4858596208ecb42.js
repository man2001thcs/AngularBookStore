"use strict";(self.webpackChunkroxanne=self.webpackChunkroxanne||[]).push([[431],{3398:(_,u,i)=>{i.d(u,{G:()=>T});var n=i(4006),t=i(6814),a=i(5658);const d=(0,t.ZF)(a.VD),c=(0,t.P1)(d,m=>m.loginProfile);var o=i(4650),l=i(694),p=i(7319),h=i(750),f=i(4511),x=i(2941),C=i(6582);let T=(()=>{class m{constructor(s,e,g,b,P,O,k,v){this.fb=s,this.tokenStorage=e,this.dialogRef=g,this.userService=b,this.messageService=P,this.hash=O,this.router=k,this.store=v,this.errorMessage="",this.subscriptions=[],this.getLoginProfile=this.store.select(c)}ngOnInit(){this.signInformGroup=this.fb.group({userName:["",n.kI.compose([n.kI.required,n.kI.minLength(4),n.kI.pattern(/^[a-z]{6,32}$/i)])],password:["",n.kI.compose([n.kI.required,n.kI.minLength(3)])]}),this.subscriptions.push(this.getLoginProfile.subscribe(s=>{if(s){this.loginProfile=s,console.log(s);const e=JSON.parse(window.atob(s.accessToken.split(".")[1]));this.tokenStorage.saveToken(s.accessToken),this.tokenStorage.saveRefreshToken(s.refreshToken),this.tokenStorage.saveUser(e),console.log(e),this.messageService.openNotifyDialog("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng").subscribe(g=>{e&&(console.log(e),this.onNoClick(),"User"===e.Role?this.router.navigate(["/user/home"]):"Admin"===e.Role&&this.router.navigate(["/admin/book/list"]))})}})),this.store.dispatch(a.nn())}ngOnDestroy(){console.log("Destroy"),this.store.dispatch(a.mK()),this.subscriptions.forEach(s=>s.unsubscribe())}onNoClick(){this.dialogRef.close()}valueChange(s,e){this.signInformGroup.value[s]=e,console.log(e)}formReset(){this.signInformGroup.setValue({userName:"man2001thcs",password:"123"})}formSubmit(){this.store.dispatch(a.x4({payload:{userName:this.signInformGroup.value.userName,password:this.signInformGroup.value.password}}))}}return m.\u0275fac=function(s){return new(s||m)(o.Y36(n.qu),o.Y36(l.i),o.Y36(p.X4l),o.Y36(h.K),o.Y36(f.e),o.Y36(x.o),o.Y36(C.F0),o.Y36(t.yh))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-login"]],decls:25,vars:2,consts:[["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"],["size","large",1,"signInForm"],[2,"color","whitesmoke"],[1,"error-message"],[3,"formGroup","ngSubmit"],[1,"row",2,"margin-bottom","20px"],["nbInput","","fullWidth","","status","info","shape","round","fieldSize","giant","type","text","id","userName","placeholder","T\xe0i kho\u1ea3n","formControlName","userName"],[1,"row"],["nbInput","","fullWidth","","status","info","shape","round","fieldSize","giant","type","password","id","password","placeholder","M\u1eadt kh\u1ea9u","formControlName","password"],[1,"signInAction"],["nbButton","","type","submit","id","sign_in","status","success"],["type","button","color","accent","id","escape",3,"click"]],template:function(s,e){1&s&&(o._UZ(0,"link",0),o.TgZ(1,"nb-card",1)(2,"nb-card-header")(3,"h2",2),o._uU(4,"\u0110\u0103ng nh\u1eadp"),o.qZA(),o.TgZ(5,"h3",3),o._uU(6),o.qZA()(),o.TgZ(7,"form",4),o.NdJ("ngSubmit",function(){return e.formSubmit()}),o.TgZ(8,"nb-card-body")(9,"div",5)(10,"h3",2),o._uU(11,"T\xe0i kho\u1ea3n"),o.qZA(),o._UZ(12,"input",6),o.qZA(),o.TgZ(13,"div",7)(14,"h3",2),o._uU(15,"M\u1eadt kh\u1ea9u"),o.qZA(),o._UZ(16,"input",8),o.qZA()(),o.TgZ(17,"nb-card-footer")(18,"div",9)(19,"button",10)(20,"span"),o._uU(21,"\u0110\u0103ng nh\u1eadp"),o.qZA()(),o.TgZ(22,"button",11),o.NdJ("click",function(){return e.onNoClick()}),o.TgZ(23,"span"),o._uU(24,"Tho\xe1t"),o.qZA()()()()()()),2&s&&(o.xp6(6),o.Oqu(e.errorMessage),o.xp6(1),o.Q6J("formGroup",e.signInformGroup))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,p.h8i,p.Asz,p.yKW,p.XWE,p.ndF,p.DPz,n.sg,n.u],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.signInForm[_ngcontent-%COMP%]{background:url(https://media4.giphy.com/media/BHNfhgU63qrks/giphy.gif) center center no-repeat;background-size:100% 100%;padding:10px 50px;height:420px;width:320px}.signInForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-weight:700!important;line-height:1rem!important;padding:.9375rem .5rem!important}.mat[_ngcontent-%COMP%]   .signInForm[_ngcontent-%COMP%]   .signInAction[_ngcontent-%COMP%]{justify-content:center;align-items:"center";left:auto;right:auto}.signInForm[_ngcontent-%COMP%]   .signInAction[_ngcontent-%COMP%]   button#sign_in[_ngcontent-%COMP%]{margin-right:10px}.input-full-width[_ngcontent-%COMP%]{width:100%}h3.error-message[_ngcontent-%COMP%]{font-size:14px!important;color:#f5f5f5;word-wrap:break-word;padding:0 12px}']}),m})()},5658:(_,u,i)=>{i.d(u,{F:()=>l,VD:()=>t,bH:()=>o,he:()=>c,mK:()=>p,nn:()=>a,x4:()=>d});var n=i(6814);const t="user/login",a=(0,n.PH)(`[${t}] initial`),d=(0,n.PH)(`[${t}] login`,(0,n.Ky)()),c=(0,n.PH)(`[${t}] loginSuccess`,(0,n.Ky)()),o=(0,n.PH)(`[${t}] loginFailed`,(0,n.Ky)()),l=(0,n.PH)(`[${t}] loginSystemFailed`,(0,n.Ky)()),p=(0,n.PH)(`[${t}] resetBookListSystemFailed`);(0,n.G0)({initial:a,login:d,loginFailed:o,loginSystemFailed:l,resetLogin:p})},1075:(_,u,i)=>{i.d(u,{m:()=>o});var n=i(7319),t=i(6582),a=i(4006),d=i(6895),c=i(4650);let o=(()=>{class l{}return l.\u0275fac=function(h){return new(h||l)},l.\u0275mod=c.oAB({type:l}),l.\u0275inj=c.cJS({imports:[d.ez,t.Bz,a.u5,n.nKr,n.zyh,n.AE1,n.BW0,n.urD,n.EoG,n.uuI,n.YNG,n.MfT,n.j7H,n.P1,n.MfT,n.spT,n.T2N,n.KdK,n.DfH,n.spT,n.T2N,n.KdK,n.DfH,a.u5,n.nKr,n.zyh,n.BW0,n.urD,n.EoG,n.uuI,n.YNG,n.MfT,n.j7H,n.P1,n.MfT,n.AE1,n.HKp,n.spT,n.T2N,n.KdK,n.DfH,n.spT,n.T2N,n.KdK,n.DfH]}),l})()},8270:(_,u,i)=>{i.d(u,{y:()=>m});var n=i(529),t=i(4650),a=i(694),d=i(6895),c=i(6582),o=i(7319);function l(r,s){if(1&r&&(t.TgZ(0,"div",3)(1,"nb-card",4)(2,"nb-card-header",5)(3,"a",6),t._UZ(4,"img",7),t.qZA()(),t.TgZ(5,"nb-card-body",8)(6,"h5",9),t._uU(7),t.qZA()(),t.TgZ(8,"nb-card-footer")(9,"nb-progress-bar",10),t._uU(10,"\u0110\xe3 b\xe1n"),t.qZA()()()()),2&r){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",e.getLink()),t.xp6(1),t.s9C("src",e.generateUrl(e.imageList[0]),t.LSH),t.xp6(3),t.Oqu(e.getName()),t.xp6(2),t.Q6J("value",e.totalSoldInMonth/(e.totalSoldInMonth+e.remainNumber)*100+40)}}function p(r,s){if(1&r&&(t.TgZ(0,"h5",17),t._uU(1),t._UZ(2,"nb-tag",18),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.getPrice()+" \u0111 "," "),t.xp6(1),t.Q6J("text",e.generateDiscount(e.discountFloat))}}function h(r,s){if(1&r&&(t.TgZ(0,"h5",19),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.currentPrice," \u0111 ")}}function f(r,s){if(1&r&&(t.TgZ(0,"h5",20),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.currentPrice," \u0111 ")}}const x=function(r){return[r]};function C(r,s){if(1&r&&(t.TgZ(0,"div",11)(1,"nb-card",4)(2,"nb-card-header",5)(3,"a",6),t._UZ(4,"img",7),t.qZA()(),t.TgZ(5,"nb-card-body",12)(6,"h5",13),t._uU(7),t.qZA()(),t.TgZ(8,"nb-card-footer",8),t.YNc(9,p,3,2,"h5",14),t.YNc(10,h,2,1,"h5",15),t.YNc(11,f,2,1,"h5",16),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",t.VKq(6,x,e.getLink())),t.xp6(1),t.s9C("src",e.generateUrl(e.imageList[0]),t.LSH),t.xp6(3),t.Oqu(e.getName()),t.xp6(2),t.Q6J("ngIf",e.discountFloat>0),t.xp6(1),t.Q6J("ngIf",e.discountFloat>0),t.xp6(1),t.Q6J("ngIf",0==e.discountFloat)}}function T(r,s){if(1&r&&(t.TgZ(0,"div",21)(1,"a",6),t._UZ(2,"img",22),t.TgZ(3,"h5",23),t._uU(4),t.qZA()()()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("routerLink",e.getLink()),t.xp6(1),t.s9C("src",e.generateUrl(e.imageList[0]),t.LSH),t.xp6(2),t.Oqu(e.getNameSearch())}}let m=(()=>{class r{constructor(e,g){this.http=e,this.tokenService=g,this.name="",this.cardType="sale",this.id="",this.totalSoldNumber=0,this.totalSoldInMonth=0,this.remainNumber=0,this.currentPrice=0,this.discountFloat=0,this.imageList=[]}ngOnChanges(){if(""!==this.id){const e=(new n.LE).append("resourceId",this.id).append("resourceType",1);this.http.get("/api/GetFile",{params:e}).subscribe(g=>{this.imageList=g.data})}}generateUrl(e){return this.imageList[0]?"https://bookstore1storage.blob.core.windows.net/1-container/1_"+e.id+e.fileType:""}generateDiscount(e){return(100*e).toString()+"%"}getPrice(){return Math.round(this.currentPrice*(1-this.discountFloat)*100)/100}getName(){return this.name.length>24?this.name.substring(0,24)+" ...":this.name}getNameSearch(){return this.name.length>24?this.name.substring(0,34)+" ...":this.name}getLink(){return"User"===this.tokenService.getUserRole()?"/user/detail/"+this.id:"/guest/detail/"+this.id}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(n.eN),t.Y36(a.i))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-book-card"]],inputs:{name:"name",cardType:"cardType",id:"id",totalSoldNumber:"totalSoldNumber",totalSoldInMonth:"totalSoldInMonth",remainNumber:"remainNumber",currentPrice:"currentPrice",discountFloat:"discountFloat"},features:[t.TTD],decls:3,vars:3,consts:[["style","\n    display: block;\n    width: 220px !important;\n    min-height: 380px !important;\n    margin: 0px 20px 0px;\n  ",4,"ngIf"],["style","\n    display: block;\n    width: 220px !important;\n    min-height: 380px !important;\n    margin: 0px 10px 0px;\n    justify-content: center;\n  ",4,"ngIf"],["style","\n    display: flex;\n    width: 200px !important;\n    min-height: 100px !important;\n    margin: 0px 20px 0px;\n    flex-direction: row;\n  ",4,"ngIf"],[2,"display","block","width","220px !important","min-height","380px !important","margin","0px 20px 0px"],[2,"height","385px !important"],[2,"justify-content","center","align-items","center","background-color","white"],[3,"routerLink"],["alt","Photo",2,"max-width","180px !important","max-height","180px !important",3,"src"],[2,"padding-bottom","0px"],[2,"font-size","15px"],["status","primary",3,"value"],[2,"display","block","width","220px !important","min-height","380px !important","margin","0px 10px 0px","justify-content","center"],[2,"padding-bottom","0px !important","padding-top","5px"],[2,"font-size","15px","margin-bottom","0px"],["style","\n          display: flex;\n          align-items: center !important;\n          font-size: 14px;\n          padding-bottom: 0px;\n          color: red;\n          margin-bottom: 0 !important;\n        ",4,"ngIf"],["style","font-size: 14px; text-decoration-line: line-through",4,"ngIf"],["style","font-size: 14px",4,"ngIf"],[2,"display","flex","align-items","center !important","font-size","14px","padding-bottom","0px","color","red","margin-bottom","0 !important"],["appearance","outline","status","danger",2,"margin-left","10px","padding","2px 10px 2px",3,"text"],[2,"font-size","14px","text-decoration-line","line-through"],[2,"font-size","14px"],[2,"display","flex","width","200px !important","min-height","100px !important","margin","0px 20px 0px","flex-direction","row"],["alt","Photo",2,"max-width","100px !important","max-height","100px !important","margin-right","10px",3,"src"],[2,"font-size","12px"]],template:function(e,g){1&e&&(t.YNc(0,l,11,4,"div",0),t.YNc(1,C,12,8,"div",1),t.YNc(2,T,5,3,"div",2)),2&e&&(t.Q6J("ngIf","sale"===g.cardType),t.xp6(1),t.Q6J("ngIf","normal"===g.cardType),t.xp6(1),t.Q6J("ngIf","search"===g.cardType))},dependencies:[d.O5,c.rH,o.Asz,o.yKW,o.XWE,o.ndF,o.c2L,o.bSZ],styles:[".example-card[_ngcontent-%COMP%]{width:200px;padding:10px 5px}.example-card[_ngcontent-%COMP%]:hover{border:2px solid rgb(92,88,88);left:-2px;top:-2px}nb-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center!important;padding-left:0!important;padding-right:0!important}.example-card[_ngcontent-%COMP%]   img#img_book[_ngcontent-%COMP%]{width:160px;height:160px}.example-card[_ngcontent-%COMP%]   p#name[_ngcontent-%COMP%]{font-weight:400}.example-card[_ngcontent-%COMP%]   p#price[_ngcontent-%COMP%]{font-weight:700;color:red!important}.example-card[_ngcontent-%COMP%]   p#price_discount[_ngcontent-%COMP%]{font-weight:700;text-decoration:line-through;color:gray!important}"]}),r})()},5369:(_,u,i)=>{i.d(u,{A:()=>t});var n=i(4650);let t=(()=>{class a{constructor(c){this._elementRef=c,this.appOutsideClick=new n.vpe}onClick(c){this._elementRef.nativeElement.contains(c)?this.appOutsideClick.emit(!1):this.appOutsideClick.emit(!0)}}return a.\u0275fac=function(c){return new(c||a)(n.Y36(n.SBq))},a.\u0275dir=n.lG2({type:a,selectors:[["","appOutsideClick",""]],hostBindings:function(c,o){1&c&&n.NdJ("click",function(p){return o.onClick(p.target)},!1,n.evT)},outputs:{appOutsideClick:"appOutsideClick"}}),a})()},4626:(_,u,i)=>{i.d(u,{I:()=>t});const n=new Map([["ECO_BusinessAdministration","Qu\u1ea3n tr\u1ecb kinh doanh"],["ECO_BusinessManagement","Qu\u1ea3n l\xfd kinh t\u1ebf"],["ENT_Comic","Comic"],["ENT_Manga","Manga"],["LIT_Novel","Ti\u1ec3u thuy\u1ebft"],["LIT_ShortStory","Truy\u1ec7n ng\u1eafn"],["SCH_FirstClass","S\xe1ch gi\xe1o khoa l\u1edbp 1"],["SCH_SecondClass","S\xe1ch gi\xe1o khoa l\u1edbp 2"]]);function t(a){return""!==a?n.get(a)??"":""}}}]);